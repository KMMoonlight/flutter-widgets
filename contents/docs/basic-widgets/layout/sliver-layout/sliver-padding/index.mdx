---
title: SliverPadding
description: 在另一个sliver的每一侧应用内边距的sliver
---

`SliverPadding`是一个为其子`Sliver`组件提供内边距的银屑组件。它的核心逻辑非常简单：它会在其子组件的周围添加指定大小的空白区域(内边距)，类似于普通`widget`中的`Padding`组件，但专用于`Sliver`系列的滚动视图。

- **主要用途**：在`CustomScrollView`、`NestedScrollView`等可以包含多个`Sliver`的滚动视图内，精确控制各个`Sliver`部分(如`SliverList`、`SliverGrid`)之间的间距以及它们与滚动视图边缘的间距。
- **核心逻辑**：它接收一个`SliverChildDelegate`(通常通过`sliver`参数传入一个具体的`Sliver`组件)，然后根据`padding`属性值，在子`Sliver`的上下左右添加空白。这些空白区域同样会参与滚动，并且不会对触摸事件做出响应。


### 使用场景：
- **避免边缘粘连**：防止`SliverAppBar`下面的`SliverList`内容直接顶到屏幕边缘，提升视觉效果。
- **控制Sliver间间距**：在两个`SliverList`或`SliverGrid`之间添加间隔，使内容分区更清晰。
- **复杂滚动布局**：在构建复杂的自定义滚动效果时，用于微调各个`Sliver`部分的位置。

## 示例
### 1. 基础使用 - 为列表添加边距
```dart
CustomScrollView(
  slivers: <Widget>[
    SliverAppBar(
      title: Text('商品列表'),
      pinned: true,
      expandedHeight: 200.0,
    ),
    // 使用 SliverPadding 为列表添加内边距
    SliverPadding(
      padding: const EdgeInsets.fromLTRB(16.0, 0, 16.0, 20.0),
      sliver: SliverList(
        delegate: SliverChildBuilderDelegate(
          (context, index) => ListTile(
            title: Text('商品项目 $index'),
          ),
          childCount: 50,
        ),
      ),
    ),
  ],
)
```

### 2. 组合多个Sliver - 控制各部分间距
```dart
CustomScrollView(
  slivers: <Widget>[
    SliverAppBar(/* ... */),
    // 第一部分：标题区域，有底部边距
    SliverPadding(
      padding: const EdgeInsets.only(bottom: 24.0),
      sliver: SliverToBoxAdapter(
        child: Padding(
          padding: EdgeInsets.all(16.0),
          child: Text(
            '热门推荐',
            style: Theme.of(context).textTheme.headlineSmall,
          ),
        ),
      ),
    ),
    // 第二部分：网格区域，有左右边距
    SliverPadding(
      padding: const EdgeInsets.symmetric(horizontal: 16.0),
      sliver: SliverGrid(
        gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
          crossAxisCount: 2,
          crossAxisSpacing: 10.0,
          mainAxisSpacing: 10.0,
        ),
        delegate: SliverChildBuilderDelegate(
          (context, index) => Container(
            color: Colors.blue[100],
            alignment: Alignment.center,
            child: Text('网格项 $index'),
          ),
          childCount: 6,
        ),
      ),
    ),
    // 第三部分：另一个列表，有顶部边距
    SliverPadding(
      padding: const EdgeInsets.only(top: 24.0),
      sliver: SliverList(/* ... */),
    ),
  ],
)
```


### 3. 动态调整内边距
```dart
class DynamicPaddingExample extends StatefulWidget {
  @override
  _DynamicPaddingExampleState createState() => _DynamicPaddingExampleState();
}

class _DynamicPaddingExampleState extends State<DynamicPaddingExample> {
  double _paddingValue = 16.0;

  void _togglePadding() {
    setState(() {
      _paddingValue = _paddingValue == 16.0 ? 50.0 : 16.0;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: CustomScrollView(
        slivers: [
          SliverAppBar(
            title: Text('动态边距'),
            actions: [
              IconButton(
                icon: Icon(Icons.swap_horiz),
                onPressed: _togglePadding,
              ),
            ],
          ),
          // padding 值随状态变化
          SliverPadding(
            padding: EdgeInsets.all(_paddingValue),
            sliver: SliverList(/* ... */),
          ),
        ],
      ),
    );
  }
}
```

## 注意点
- **性能影响**: `SliverPadding`本身是一个非常轻量的组件，它只是调整了其子Sliver的绘制位置。但是，如果错误地将其包裹在需要昂贵布局计算的组件(如`SliverList`包含大量复杂子项)之外，频繁改变`padding`值可能会导致重绘。通常，其性能开销可以忽略不计。
- **与`Padding` widget的区别**: 切勿在`CustomScrollView`的slivers列表中直接使用普通的`Padding` widget。`Padding`是一个普通的盒子组件，而slivers列表要求其直接子项必须是Sliver类型。`SliverPadding`是专门为解决此问题而设计的Sliver版本。
- `MediaQuery.of(context).padding`的运用：一个非常重要的最佳实践是，使用`MediaQuery`来避免系统UI(如刘海屏、状态栏)的遮挡。通常会将`SliverAppBar`的底部内容与`SliverPadding`结合使用。
```dart
SliverPadding(
  // 顶部内边距考虑状态栏高度，确保内容在安全区域内
  padding: EdgeInsets.only(top: MediaQuery.of(context).padding.top),
  sliver: SliverList(/* ... */),
)
```
- **内边距的滚动特性**: 记住，`SliverPadding`添加的空白区域是滚动内容的一部分。如果你希望有一个始终固定在底部、不随内容滚动的底部栏，应该使用`Scaffold`的`bottomNavigationBar`参数，而不是在`SliverPadding`中简单地增加巨大的底部内边距。

## 构造函数
```dart
SliverPadding({
  Key? key,
  required this.padding, // 必需参数，定义内边距
  Widget? sliver, // 子 Sliver 组件
})
```

## 属性
| 属性名 | 属性类型 | 说明 |
| :--- | :--- | :--- |
| `key` | `Key?` | 组件的控制键。 |
| `padding` | `EdgeInsetsGeometry` | **关键属性**。定义内边距。不可为 null。 |
| `sliver` | `Widget?` | 被添加内边距的子组件。 |

**关键属性解析**
- `padding`(EdgeInsetsGeometry):
  - 这是`SliverPadding`最核心且唯一的配置属性。所有布局效果都通过它来实现。
  - 你可以使用`EdgeInsets`类的多种便捷方法来设置：
    - `EdgeInsets.all(16.0)`: 所有方向统一为 16 逻辑像素。
    - `EdgeInsets.symmetric(horizontal: 16.0, vertical: 8.0)`: 水平和垂直方向分别设置。
    - `EdgeInsets.only(left: 16.0, top: 8.0)`: 只设置左边和上边。
    - `EdgeInsets.fromLTRB(16.0, 0, 16.0, 20.0)`: 分别设置左、上、右、下四个方向的值。
- 正确设置`padding`是实现预期布局效果的关键。在设计时，应仔细考虑与屏幕安全区域、其他`Sliver`组件间距的关系。
