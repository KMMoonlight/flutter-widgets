---
title: Scrollbar
description: 为可滚动区域提供视觉反馈和交互控制
---

`Scrollbar`是Flutter中的一个Material Design风格滚动条组件，主要用于为可滚动区域(如`ListView`、`GridView`或`CustomScrollView`)提供视觉反馈和交互控制。其核心逻辑是监听滚动控制器
的位置变化，动态绘制一个可拖拽的滚动条`thumb`，帮助用户快速定位内容。与原生滚动条不同，Flutter的`Scrollbar`会自动隐藏非活动状态下的`thumb`，避免遮挡内容。

### 使用场景
- 长列表浏览: 当列表内容超出屏幕时，`Scrollbar`提供快速滚动定位功能(如聊天记录、商品列表)。
- 数据表格: 在横向或纵向滚动的表格中，`Scrollbar`帮助用户精确导航到特定行列。
- 自定义滚动界面: 结合`CustomScrollView`实现复杂滚动效果时，`Scrollbar`增强用户体验。


## 示例
### 基础列表滚动条
```dart
Scrollbar(
  child: ListView.builder(
    itemCount: 100,
    itemBuilder: (context, index) => ListTile(title: Text('项目 $index')),
  ),
)
```

### 交互式滚动控制
```dart
final ScrollController _controller = ScrollController();

@override
Widget build(BuildContext context) {
  return Column(
    children: [
      ElevatedButton(
        onPressed: () => _controller.jumpTo(500), // 滚动到指定位置
        child: Text('跳转'),
      ),
      Expanded(
        child: Scrollbar(
          controller: _controller, // 绑定控制器
          child: ListView.builder(
            controller: _controller,
            itemCount: 100,
            itemBuilder: (context, index) => ListTile(title: Text('数据 $index')),
          ),
        ),
      ),
    ],
  );
}
```

### 自定义样式与主题适配
```dart
Scrollbar(
  thickness: 12, // 调整滚动条宽度
  radius: Radius.circular(10), // 圆角样式
  thumbVisibility: true, // 始终显示 thumb（适用于需要常显的场景）
  child: ListView(
    children: [
      ...List.generate(50, (index) => Container(
        height: 60,
        color: index.isEven ? Colors.grey[300] : Colors.white,
        child: Center(child: Text('条目 $index')),
      )),
    ],
  ),
)
```

## 注意点
**常见问题与优化**
- **性能影响**:
  - 避免对超长列表(如10,000+项)直接使用`Scrollbar`，可能因频繁监听滚动事件导致卡顿。建议使用`ListView.builder`懒加载。
  - 若需高性能滚动，可考虑`RawScrollbar`替代(但需手动实现更多细节)。
- **兼容性警告**: 
  - `Scrollbar`默认依赖Material主题，在Cupertino风格应用中需通过`ScrollbarTheme`调整样式。
  - 在嵌套滚动视图(`NestedScrollView`)中，`Scrollbar`可能无法正确关联子控制器，需显式指定`controller`参数。

**最佳实践**
- 始终为可滚动组件设置`controller`属性，以便精准控制滚动行为。
- 在移动端默认隐藏`thumb`(通过`thumbVisibility: false`)以节省空间，PC端可常显提升交互性。
- 使用`NotificationListener<ScrollNotification>`监听滚动事件，实现自定义逻辑(如滚动时隐藏导航栏)。


## 构造函数
```dart
Scrollbar({
  Key? key,
  required Widget child, // 子组件（必须为可滚动组件）
  ScrollController? controller, // 绑定的滚动控制器
  bool? thumbVisibility, // 是否始终显示 thumb（null 时自动隐藏）
  bool? trackVisibility, // 是否显示滚动轨道
  double? thickness, // 滚动条宽度（默认 6.0）
  Radius? radius, // thumb 圆角半径（默认 Radius.circular(10)）
  ScrollbarOrientation? scrollbarOrientation, // 方向（垂直/水平）
  bool? interactive, // 是否允许拖拽交互（默认 true）
  // ... 其他样式参数（如颜色、间距）
})
```

## 属性
| 属性名               | 属性类型               | 说明                                                                 |
|----------------------|------------------------|----------------------------------------------------------------------|
| `child`              | `Widget`               | **必需**，子组件（如 ListView、GridView）。                         |
| `controller`         | `ScrollController?`    | 绑定的滚动控制器，用于联动代码控制滚动位置。                         |
| `thumbVisibility`    | `bool?`                | 是否强制显示 thumb（null 时自动隐藏，true 为常显）。                |
| `trackVisibility`    | `bool?`                | 是否显示滚动轨道（默认 false）。                                    |
| `thickness`          | `double?`              | 滚动条宽度（默认 6.0，适配不同设备密度时可调整）。                  |
| `radius`             | `Radius?`              | thumb 的圆角样式（默认圆角 10）。                                   |
| `interactive`        | `bool?`                | 是否允许用户拖拽滚动条（默认 true，禁用时仅作指示器）。             |


### 关键属性详解
- `controller`: 通过绑定`ScrollController`，可实现程序化滚动(如`jumpTo()`或`animateTo()`)，是复杂交互的核心。若未指定，`Scrollbar`会自动查找父级滚动组件的控制器。
- `thumbVisibility`: 在需要常显滚动条的桌面端或数据密集场景中，设置为true可避免用户寻找滚动条。移动端建议保持默认行为以节省界面空间。
- `thickness`与`radius`: 用于自定义视觉样式，例如在紧凑界面中设置`thickness: 4`减少占用，或通过`radius: Radius.zero`实现直角风格。
